# Shell脚本基础语法

## 1. Shebang声明
```bash
#!/bin/bash
# 指定解释器，必须放在脚本第一行
```

## 2. 注释
```bash
# 单行注释
: '
多行注释
可以写多行
'
```

## 3. 变量定义与使用
```bash
# 定义变量（等号两边不能有空格）
name="张三"
age=25
readonly PI=3.14159  # 只读变量

# 使用变量
echo $name
echo ${name}  # 推荐写法，更清晰
echo "我的名字是${name}，年龄是${age}"

#echo -e 启用对反斜杠转义序列的解释
echo -e "Hello\nWorld"     # \n 换行
echo -e "Hello\tWorld"     # \t 制表符
echo -e "Hello\bWorld"     # \b 退格
echo -e "Hello\\World"     # \\ 反斜杠本身
echo -e "Hello\"World"     # \" 双引号
echo -e "Hello\'World"     # \' 单引号

# 删除变量
unset name
```

## 4. 特殊变量
```bash
echo "当前shell进程ID：$$"              # $$ 当前shell进程的PID
echo "当前shell进程父进程ID：$PPID"      # $PPID 父进程的PID
echo "当前shell脚本名称：$0"            # $0 脚本名称或shell名称
echo "传递给脚本或函数的参数个数：$#"    # $# 参数的个数
echo "所有传递给脚本或函数的参数(做为一个字符串)：$*"    # $* 所有参数作为一个字符串，用IFS分隔
echo "所有传递给脚本或函数的参数(做为独立字符串)：$@"    # $@ 所有参数作为独立的字符串
echo "显示最后命令的退出状态：$?"        # $? 上一个命令的退出状态码
```

## 5. 数组
```bash
# 定义数组
fruits=("苹果" "香蕉" "橙子")
numbers=(1 2 3 4 5)

# 访问数组元素
echo ${fruits[0]}     # 第一个元素
echo ${fruits[@]}     # 所有元素
echo ${#fruits[@]}    # 数组长度

# 添加元素
fruits[3]="葡萄"
fruits+=("西瓜")
```

## 6. 命令替换
```bash
# 方法1：反引号（不推荐）
current_date=`date`

# 方法2：$()（推荐）
current_date=$(date)
file_count=$(ls | wc -l)
```

## 7. 算术运算
```bash
# 方法1：$((表达式))
result=$((5 + 3))
echo $result  # 输出：8

# 方法2：let命令
let result=5+3
let result++

# 方法3：expr命令
result=$(expr 5 + 3)
```

## 8. 输入输出
```bash
# 输出
echo "Hello World"
printf "%-10s %-8s %-4s\n" 姓名 性别 体重kg  # %-10s 指一个宽度为10个字符（-表示左对齐，没有则表示右对齐），任何字符都会被显示在10个字符宽的字符内，如果不足则自动以空格填充，超过也会将内容全部显示出来。
printf "%-10s %-8s %-4.2f\n" 郭靖 男 66.1234 # %-4.2f 指格式化为小数，其中.2指保留2位小数。
# % - 格式说明符开始
# - - 左对齐标志（默认是右对齐）
# 4 - 最小宽度为4个字符
# s - 字符串类型
# .2 - 精度：小数点后2位
# f - 浮点数类型

# 输入
read -p "请输入您的姓名: " username
read -s -p "请输入密码: " password  # -s隐藏输入
```

## 9. 退出状态
```bash
# 设置退出状态
exit 0    # 成功
exit 1    # 失败

# 检查命令是否成功
if command; then
    echo "命令执行成功"
else
    echo "命令执行失败"
fi
```

## 实践练习

### 练习1：基本变量操作
```bash
#!/bin/bash
# 创建一个脚本，接收用户姓名和年龄，然后输出问候语

read -p "请输入您的姓名: " name
read -p "请输入您的年龄: " age

echo "您好，${name}！您今年${age}岁了。"
echo "明年您将${age}岁。"
```

### 练习2：参数处理
```bash
#!/bin/bash
# 创建一个脚本，处理命令行参数

echo "脚本名称: $0"
echo "参数个数: $#"
echo "所有参数: $@"

if [ $# -eq 0 ]; then
    echo "请提供至少一个参数"
    exit 1
fi

echo "第一个参数: $1"
```

### 练习3：数组操作
```bash
#!/bin/bash
# 数组基本操作示例

# 定义学生成绩数组
scores=(85 92 78 96 88)

echo "所有成绩: ${scores[@]}"
echo "成绩个数: ${#scores[@]}"

# 计算总分
total=0
for score in "${scores[@]}"; do
    total=$((total + score))
done

average=$((total / ${#scores[@]}))
echo "平均分: $average"
```

## 小贴士
1. **变量命名**：使用有意义的名称，遵循下划线命名法
2. **引号使用**：双引号保留变量替换，单引号保持字面值
3. **调试技巧**：使用 `set -x` 开启调试模式
4. **错误处理**：使用 `set -e` 遇到错误立即退出